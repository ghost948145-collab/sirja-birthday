<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Happy Birthday Sirja ğŸ‰</title>

<style>
body {
  margin: 0;
  font-family: 'Segoe UI', sans-serif;
  background: linear-gradient(135deg, #ffd6e8, #c8e7ff);
  text-align: center;
  overflow-x: hidden;
}

.container {
  padding: 40px 20px;
}

.card {
  background: white;
  border-radius: 20px;
  padding: 30px;
  max-width: 900px;
  margin: auto;
  box-shadow: 0 10px 25px rgba(0,0,0,0.15);
}

h1 { color: #ff4f9a; }

button {
  background: #ff4f9a;
  color: white;
  border: none;
  padding: 14px 25px;
  border-radius: 30px;
  margin: 10px;
  font-size: 1em;
  cursor: pointer;
}
button:hover { background: #e8438c; }

/* Quiz animation */
.fade-slide {
  animation: fadeSlide 0.6s ease;
}
@keyframes fadeSlide {
  from { opacity: 0; transform: translateX(40px); }
  to { opacity: 1; transform: translateX(0); }
}

/* Emoji animation */
.emoji {
  font-size: 4rem;
  position: fixed;
  left: 50%;
  top: 40%;
  transform: translateX(-50%);
  animation: pop 2s ease forwards;
  z-index: 999;
}
@keyframes pop {
  0% { transform: scale(0.5) translateX(-50%); opacity: 0; }
  20% { transform: scale(1.2) translateX(-50%); opacity: 1; }
  100% { transform: scale(1) translateX(-50%); opacity: 0; }
}

/* Gallery */
.gallery {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
}
.gallery img {
  width: 150px;
  height: 150px;
  object-fit: cover;
  margin: 8px;
  border-radius: 15px;
}

/* Confetti */
.confetti {
  position: fixed;
  width: 10px;
  height: 10px;
  top: -10px;
  animation: fall linear forwards;
}
@keyframes fall {
  to {
    transform: translateY(110vh) rotate(360deg);
    opacity: 0;
  }
}

/* Final page text */
#page-final p {
  font-size: 1.5em;
  line-height: 1.8;
}
</style>
</head>

<body>

<audio id="bgMusic" loop muted>
  <source src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_0b9f1a6b62.mp3?filename=happy-birthday-to-you-piano-version-13976.mp3" type="audio/mpeg">
</audio>

<div class="container">

<!-- PAGE 1 -->
<div id="page-countdown" class="card">
  <h2>ğŸŒ™ Countdown to Something Special</h2>
  <div id="countdown">Loading...</div>
</div>

<!-- PAGE 2 -->
<div id="page-quiz" class="card" style="display:none;">
  <h2 id="question"></h2>
  <div id="options"></div>
</div>

<!-- PAGE 3 -->
<div id="page-birthday" class="card" style="display:none;">
  <h1>ğŸ‰ Happy Birthday Sirja ğŸ‰</h1>
  <p>You reached the special moment ğŸ’–</p>
  <div class="gallery">
    <img src="images/6237745613357386540.jpg">
    <img src="images/6237745613357386541.jpg">
    <img src="images/6237745613357386542.jpg">
    <img src="images/6237745613357386543.jpg">
    <img src="images/6237745613357386544.jpg">
  </div>
</div>

<!-- PAGE 4 -->
<div id="page-final" class="card" style="display:none;">
  <h2>ğŸ’Œ</h2>
  <p>
    From online chats to endless calls,<br>
    laughing at everything and saying â€œokayyyyyyyyâ€â€¦<br><br>
    you became someone truly special ğŸ’•<br><br>
    Happy Birthday Sirja ğŸ‚<br><br>
    â€” With all my love,<br>
    <strong>PAVAN ğŸ’–</strong>
  </p>
</div>

</div>

<script>
const music = document.getElementById("bgMusic");
const countdownEl = document.getElementById("countdown");
let musicStarted = false;

/* COUNTDOWN (REAL MIDNIGHT) */
const target = new Date();
target.setTime(Date.now() + 60000);

const timer = setInterval(() => {
  const diff = target - Date.now();
  if (diff <= 0) {
    clearInterval(timer);
    startQuiz();
    return;
  }
  const h = Math.floor((diff/(1000*60*60))%24);
  const m = Math.floor((diff/(1000*60))%60);
  const s = Math.floor((diff/1000)%60);
  countdownEl.innerHTML = `${h}h ${m}m ${s}s`;
}, 1000);

function startQuiz() {
  document.getElementById("page-countdown").style.display="none";
  document.getElementById("page-quiz").style.display="block";
  showQuestion();
}

/* QUIZ DATA */
const quiz = [
  { q:"How did we meet?", options:["School","College","Online","Party"], answer:2 },
  { q:"What do I do all the time?", options:["Sleep","Laugh at everything","Get angry","Ignore"], answer:1 },
  { q:"Our favorite thing?", options:["Studying","Short texts","Long fun calls","Silence"], answer:2 }
];

let current = 0;

function showEmoji(char) {
  const e = document.createElement("div");
  e.className = "emoji";
  e.innerText = char;
  document.body.appendChild(e);
  setTimeout(() => e.remove(), 2000);
}

function showQuestion() {
  const box = document.getElementById("page-quiz");
  box.classList.remove("fade-slide");
  void box.offsetWidth;
  box.classList.add("fade-slide");

  const q = quiz[current];
  document.getElementById("question").innerText = q.q;
  const optionsDiv = document.getElementById("options");
  optionsDiv.innerHTML = "";

  q.options.forEach((opt, i) => {
    const btn = document.createElement("button");
    btn.innerText = opt;
    btn.onclick = () => {

      if (!musicStarted && !localStorage.getItem("musicPlayed")) {
        music.muted = false;
        music.play().catch(()=>{});
        localStorage.setItem("musicPlayed","true");
        musicStarted = true;
      }

      if (i === q.answer) {
        showEmoji("ğŸ˜„");
      } else {
        showEmoji("ğŸ˜¢");
        setTimeout(() => {
          alert("Correct answer: " + q.options[q.answer]);
        }, 500);
      }

      setTimeout(() => {
        current++;
        current < quiz.length ? showQuestion() : endQuiz();
      }, 2000);
    };
    optionsDiv.appendChild(btn);
  });
}

function endQuiz() {
  document.getElementById("page-quiz").style.display="none";
  document.getElementById("page-birthday").style.display="block";
  launchConfetti();

  setTimeout(() => {
    document.getElementById("page-birthday").style.display="none";
    document.getElementById("page-final").style.display="block";
  }, 6000);
}

/* CONFETTI */
function launchConfetti() {
  for (let i = 0; i < 200; i++) {
    const c = document.createElement("div");
    c.className = "confetti";
    c.style.left = Math.random()*100+"vw";
    c.style.background = `hsl(${Math.random()*360},100%,60%)`;
    c.style.animationDuration = (Math.random()*3+2)+"s";
    document.body.appendChild(c);
    setTimeout(()=>c.remove(),6000);
  }
}
</script>

</body>
</html>
